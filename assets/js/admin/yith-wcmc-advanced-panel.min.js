jQuery(document).ready(function(a){var h=a("body"),q=a(".advanced-integration-content"),r=a("#add_options_set"),f=[],g=[];a("#yith_wcmc_mailchimp_integration_mode").on("change",function(){"simple"==a(this).val()?(a("#yith_wcmc_mailchimp_list").parents("tr").show(),a("#yith_wcmc_mailchimp_groups").parents("tr").show(),r.parents("tr").hide()):(a("#yith_wcmc_mailchimp_list").parents("tr").hide(),a("#yith_wcmc_mailchimp_groups").parents("tr").hide(),r.parents("tr").show())}).change();a(document).on("click",
    "#add_options_set",function(d){var b=a(this);d.preventDefault();a.ajax({beforeSend:function(){b.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){b.unblock()},data:{action:yith_wcmc_advanced_panel.actions.add_advanced_panel_item_action,item_id:yith_wcmc_advanced_panel.item_id},dataType:"html",error:function(){},method:"POST",success:function(b){0!=b.length&&(q.prepend(b),a(q.find(".advanced-panel-item").get(0)).hide().slideDown(),yith_wcmc_advanced_panel.item_id++,
        t(),h.trigger("wc-enhanced-select-init"),h.trigger("add_updater_handler"))},url:ajaxurl})});var t=function(){a(".advanced-panel-item .panel-item-handle a.collapse-button").off("click").on("click",function(d){var b=a(this).parents(".advanced-panel-item"),c=b.find(".panel-item-content");d.preventDefault();c.slideToggle(300,function(){b.toggleClass("opened")})});a(".advanced-panel-item .panel-item-handle a.remove-button").off("click").on("click",function(d){var b=a(this).parents(".advanced-panel-item");
    d.preventDefault();b.slideUp(300,function(){a(this).remove()})});a(".advanced-panel-item a.add-field").off("click").on("click",function(d){var b=a(this),c=b.parents(".advanced-panel-item"),e=c.data("id");d.preventDefault();a.ajax({beforeSend:function(){b.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});"undefined"==typeof f[e]&&(f[e]=c.find(".field-item").length+1)},complete:function(){b.unblock();f[e]+=1},data:{action:yith_wcmc_advanced_panel.actions.add_advanced_panel_field_action,
    item_id:e,field_id:"undefined"==typeof f[e]?c.find(".field-item").length+1:f[e],list_id:b.parents(".advanced-panel-item").find("select.list-select").val()},dataType:"html",error:function(){},method:"POST",success:function(c){0!=c.length&&(b.parents(".section").find(".fields-content").prepend(c),a(b.parents(".section").find(".fields-content .field-item").get(0)).hide().slideDown(),h.trigger("wc-enhanced-select-init"),p())},url:ajaxurl})});a(".advanced-panel-item a.add-condition").off("click").on("click",
    function(d){var b=a(this),c=b.parents(".advanced-panel-item"),e=c.data("id");d.preventDefault();a.ajax({beforeSend:function(){b.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});"undefined"==typeof g[e]&&(g[e]=c.find(".condition-item").length+1)},complete:function(){b.unblock();g[e]+=1},data:{action:yith_wcmc_advanced_panel.actions.add_advanced_panel_condition_action,item_id:e,condition_id:"undefined"==typeof g[e]?c.find(".condition-item").length+1:g[e]},dataType:"html",error:function(){},
        method:"POST",success:function(c){0!=c.length&&(b.parents(".section").find(".conditions-content").prepend(c),a(b.parents(".section").find(".conditions-content .condition-item").get(0)).hide().slideDown(),h.trigger("wc-enhanced-select-init"),p())},url:ajaxurl})})},u=function(d){d=a(this);var b=d.val(),c=d.parent().next(),e=c.find(".condition_op_mixed"),f=c.find(".condition_op_set"),k=c.find(".condition_op_number"),l=c.find(".condition_products.enhanced").add(c.find(".condition_products.enhanced").next()),
    m=c.find(".condition_cats.enhanced").add(c.find(".condition_cats.enhanced").next()),n=c.find(".condition_total"),g=c.find(".condition_key"),h=c.find(".condition_value");c.fadeOut(300,function(){switch(b){case "product_in_cart":e.hide();f.show();k.hide();l.removeClass("select-hidden");m.addClass("select-hidden");n.hide();g.hide();h.hide();break;case "product_cat_in_cart":e.hide();f.show();k.hide();l.addClass("select-hidden");m.removeClass("select-hidden");n.hide();g.hide();h.hide();break;case "order_total":e.hide();
    f.hide();k.show();l.addClass("select-hidden");m.addClass("select-hidden");n.show();g.hide();h.hide();break;case "custom":e.show(),f.hide(),k.hide(),l.addClass("select-hidden"),m.addClass("select-hidden"),n.hide(),g.show(),h.show()}c.fadeIn()})},p=function(){a(".advanced-panel-item .panel-item-content .field-item a.remove-button").on("click",function(d){var b=a(this).parents(".field-item");d.preventDefault();b.slideUp(300,function(){a(this).remove()})});a(".advanced-panel-item .panel-item-content .field-item a.update-fields").on("click",
    function(d){var b=a(this),c=b.parent().find("select"),e=c.val(),f=b.parents(".panel-item-content").find("select.list-select").val();d.preventDefault();a.ajax({beforeSend:function(){b.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){b.unblock()},data:{request:"lists/merge-vars",force_update:!0,args:{id:[f]},action:yith_wcmc.actions.do_request_via_ajax_action,yith_wcmc_ajax_request_nonce:yith_wcmc.ajax_request_nonce},dataType:"json",method:"POST",success:function(a){var b=
        "",d=0;if("undefined"!=typeof a.data&&0!=a.data.length)for(d in a.data){var f=0;if(0!=a.data[d].merge_vars.length)for(f in a.data[d].merge_vars)b+='<option value="'+a.data[d].merge_vars[f].tag+'" '+(e==a.data[d].merge_vars[f].tag?'selected="selected"':"")+" >"+a.data[d].merge_vars[f].name+"</option>"}c.html(b);0==b.length?c.prop("disabled"):c.removeProp("disabled")},url:ajaxurl})});a(".advanced-panel-item .panel-item-content .condition-item a.remove-button").on("click",function(d){var b=a(this).parents(".condition-item");
    d.preventDefault();b.slideUp(300,function(){a(this).remove()})});a(".advanced-panel-item .panel-item-content .condition-item select.condition_type").on("change",u).change()};t();p()});